@*@model SAExpiations.Models.ExpiationOffence*@
@model IEnumerable<SAExpiations.ViewModels.ExpiationDetails>

@{
    ViewData["Title"] = "Details";
    string[] months = { "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };
    int total = 0;
    int yearlyTotal = 0;
}

<h1>Details</h1>

<div>
    <h4>ExpiationOffence</h4>
    <hr />
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th scope="col">Month</th>
                <th scope="col">Description</th>
                <th scope="col">Count</th>
            </tr>
        </thead>
    @for(var month = 0; month < 12; month++) {
        <tr>
                <th colspan="3" scope="row">@months[month]</th>
            @foreach(var item in Model){
                
                    if (item.IssueDate == month)
                    {
                    <tr>
                        <td colspan="2">
                                @Html.DisplayFor(modelItem => item.NoticeStatusDesc)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.StatusCount)
                            <!--add total -->
                                @{
                                    total += @item.StatusCount; yearlyTotal += @item.StatusCount;
                                }
       
                        </td>
                    </tr>
                    }
            }
            <tr class="table-danger font-weight-bold">
                <td colspan="2" class="table-danger text-end font-weight-bold">@months[month] Total:</td>
                <td colspan="1" class="table-danger font-weight-bold">@total offences</td>
                @{total = 0;}
            </tr>
            </tr>
        }
    </table>
        <table class="table table-striped table-hover">
            <tr>
        <!-- visualise yearly total -->
        <td colspan="3" class="text-end font-weight-bold">Yearly Total: @yearlyTotal</td>
        </tr>
        @{
            yearlyTotal = 0;
        }
        </table>


   
</div>
<div>
    <a asp-action="Index">Back to List</a>
</div>
